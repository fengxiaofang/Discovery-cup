<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js"></script>
    <script src="js/regist.js"></script>
    <link rel="stylesheet" href="css/regist.css" type="text/css">
</head>
<body onload="createCode()">
<div class="header">
    <img src="images/logo.png" alt="logo" height="60px;" width="500px";/>
</div>
<div class="content">
    <div class="content_top">注册页面</div>
    <div class="content_bottom">
        <div class="content_bottom_left">
            <form ng-app="myApp" ng-controller="myCtrl" name="myForm" id="myform" method="post"  action="index.html" novalidate>
               <div class="cont">
                <table border="0">
                    <tr>
                        <td width="390px;">
                            <div class="input_item">
                                <label>手机号：</label>
                                <input type="text" value="" class="text" name="telephone" ng-model="telephone" required>
                            </div>
                        </td>
                        <td><span style="color:red; width: 120px; float: left;" ng-show="myForm.telephone.$dirty && myForm.telephone.$invalid">
                            <span ng-show="myForm.telephone.$error.required">*手机号是必须的</span></span></td>
                    </tr>
                    <tr>
                        <td width="390px;">
                            <div class="input_item">
                                <label>密码：</label>
                                <input type="password" value="" class="text" id="password" name="password"  ng-model="password" required>
                            </div>
                        </td>
                        <td><span style="color:red; width: 120px; float: left;" ng-show="myForm.password.$dirty && myForm.password.$invalid">
                            <span ng-show="myForm.password.$error.required">*请输入密码</span></span></td>
                    </tr>
                    <tr>
                        <td width="390px;">
                            <div class="input_item">
                                <label>确认密码：</label>
                                <input type="password" value="" class="text"  id="repassword" name="repassword" ng-model="repassword" required>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td width="390px;">
                            <div class="input_item">
                                <label>验证码：</label>
                                <input type="text" value="" class="text1"  type="text" id="inputCode" required>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td> <div class="code" id="checkCode" onclick="createCode()" ></div></td>
                        <td><a  href="#" onclick="createCode()">看不清换一张</a></td>
                    </tr>

                    <tr>
                        <td>
                            <div class="input_item"><label>&nbsp;</label>
                                <input type="button" value="注册" id="submit_btn" onclick="tiaozhuan()" ng-disabled="myForm.telephone.$pristine && myForm.telephone.$invalid ||
                                       myForm.password.$pristine && myForm.password.$invalid" class="btn_1" />
                            </div>
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                </table>
               </div>
            </form>
        </div>
        <div class="content_bottom_right">
            <img src="images/regist_bg.png" alt="">
        </div>
    </div>
</div>
<script>
    var app= angular.module('myApp',[]);
    app.controller('myCtrl',function ($scope) {
        $scope.telephone='';
        $scope.password='';
        $scope.repassword='';
 });
</script>
<script>
    var flag=0;
    var flag1=0;
    var code;
    function createCode() {
        code = "";
        var codeLength = 6; //验证码的长度
        var checkCode = document.getElementById("checkCode");
        var codeChars = new Array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9,
            'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'); //所有候选组成验证码的字符，当然也可以用中文的
        for (var i = 0; i < codeLength; i++)
        {
            var charNum = Math.floor(Math.random() * 52);
            code += codeChars[charNum];
        }
        if (checkCode)
        {
            checkCode.className = "code";
            checkCode.innerHTML = code;
        }
    }

    function validateCode()
    {
        var inputCode = document.getElementById("inputCode").value;
        if (inputCode.length <= 0)
        {
            alert("请输入验证码！");
        }
        else if(inputCode.toUpperCase() != code.toUpperCase())
        {
            alert("验证码输入有误！");
            createCode();
        }
        else
        {
            flag=1;
           alert("hello");
        }
    }

    (function(){
        var sub = document.getElementById("submit_btn");
        //初始化移入移出事件
        if(sub.addEventListener){
            sub.addEventListener("click", test);
        }/*else if(sub.attachEvent){
            sub.attachEvent("onClick", test);
        }*/
    })();
    function test(){
        var password = document.getElementById("password");
        var passwordConfirm = document.getElementById("repassword");
        if(password.value != passwordConfirm.value)
            alert("对不起，您2次输入的密码不一致");
        else
        {
            flag1=1;
            alert("world");
        }

    }

    function tiaozhuan() {
        if(flag==1 && flag1==1)
        {
            //myform.action="index.html";
            alert("hello world");
            // window.location.href='index.html';
        }
    }


</script>
</body>
</html>